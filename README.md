# PERL #

Projekty v ramci semetru predmetu perl

## Program na p≈ôeveden√≠ kolekce textov√Ωch dokument≈Ø do vektorov√© reprezentace ##

Vstupem  je  textov√Ω soubor, jeho≈æ jednotliv√© ≈ô√°dky reprezentuj√≠ textov√© dokumenty (jeden ≈ô√°dek = jeden 
dokument).  ≈ò√°dky maj√≠ n√°sleduj√≠c√≠ strukturu: C\tTEXT\n 
kde  C  je  t≈ô√≠da  dokumentu  (nƒõkolik  znak≈Ø),  \t  je  tabel√°tor,  TEXT  je  posloupnost  libovoln√Ωch  znak≈Ø 
reprezentuj√≠c√≠ obsah dokumentu, \n je znak konce ≈ô√°dku. 
Z ka≈æd√©ho textu se odeberou HTML a obdobn√© tagy, entity, znaky, kter√© nejsou p√≠smeny  (ƒç√≠sla, speci√°ln√≠ 
znaky), a ka≈æd√Ω text se p≈ôevede na tzv. bag-of-words reprezentaci, neboli posloupnost slov, kde po≈ôad√≠ nen√≠ 
d≈Øle≈æit√©. 
Z ka≈æd√©ho textu se n√°slednƒõ vytvo≈ô√≠ vektor, kde jednotliv√© prvky vektoru (atributy) odpov√≠daj√≠ jednotliv√Ωm 
slov≈Øm v cel√© kolekci a hodnoty ve vektoru budou z√°viset na v√Ωskytu dan√Ωch slov v tomto textu. Hodnota 
(v√°ha i-t√©ho slova v j-t√©m dokumentu) je souƒçinem dvou vah ‚Äì lok√°ln√≠ a glob√°ln√≠, a normalizaƒçn√≠ho faktoru: 
 wij = lij * gi * nj 
 Lok√°ln√≠ v√°hy mohou b√Ωt dvoj√≠ho typu: 
ÔÇ∑ TP (term presence) ‚Äì p≈ô√≠tomnost slova v dokumentu (1 = ano, 0 = ne), 
ÔÇ∑ TF (term frequency) ‚Äì poƒçet v√Ωskyt≈Ø slova v dokumentu (0 a v√≠c). 
Glob√°ln√≠ v√°ha bude pouze jedna: 
ÔÇ∑ IDF (inverse document frequency) ‚Äì viz d√°le, 
ÔÇ∑ je mo≈ænost glob√°ln√≠ v√°hu neuplatnit, v tom p≈ô√≠padƒõ m√° tato v√°ha hodnotu 1 (hodnota atributu pro 
dan√Ω dokument tak bude m√≠t pouze hodnotu lok√°ln√≠ v√°hy). 
Posledn√≠ hodnotou vektoru je t≈ô√≠da dokumentu. Ka≈æd√Ω dokument je tedy reprezentov√°n vektorem o d√©lce 
N+1, kde N je poƒçet unik√°tn√≠ch slov ve v≈°ech dokumentech (+1 je pro t≈ô√≠du dokumentu). Pokud  to bude po≈æadov√°no, mohou b√Ωt ze v≈°ech text≈Ø odebr√°na slova, kter√° maj√≠ ƒçetnost ve v≈°ech 
dokumentech dohromady n√≠zkou (nap≈ô. 1). Mohou b√Ωt tak√© odebr√°na slova, kter√° maj√≠ urƒçit√Ω mal√Ω poƒçet 
znak≈Ø.  
V≈°echny informace, kter√© ovliv≈àuj√≠ zp≈Øsob zpracov√°n√≠ dokument≈Ø, stejnƒõ jako jm√©na vstupn√≠ch a v√Ωstupn√≠ch 
soubor≈Ø budou p≈ôed√°ny jako parametry skriptu.  Tyto parametry budou zpracov√°ny s vyu≈æit√≠m libovoln√©ho 
modulu ze s√≠tƒõ CPAN.  Pokud nejsou nƒõkter√© parametry zad√°ny, bude se pracovat s nƒõjak√Ωmi implicitn√≠mi 
hodnotami.  
P≈ô√≠klad vstupn√≠ho souboru (fiktivn√≠ u≈æivatelsk√© recenze produktu): _P  good :-) _P  very good. _N  <b>not</b> good _N  bad!!! _N  very, very bad  
P≈ô√≠klad v√Ωstupn√≠ho souboru (minim√°ln√≠ d√©lka slova = 1, minim√°ln√≠ v√Ωskyt slova = 1, hodnota ve  vektoru  = 
TF): GOOD VERY NOT BAD _CLASS_ 1  0 0 0 _P 1  1 0 0 _P 1  0 1 0 _N 0  0 0 1 _N 0  2 0 1 _N 
P≈ô√≠klad v√Ωstupn√≠ho souboru (minim√°ln√≠ d√©lka slova = 4, minim√°ln√≠ poƒçet v√Ωskytu slova = 2, hodnota TP): GOOD VERY _CLASS_ 1  0 _P 1  1 _P 1  0 _N 0  0 _N 0  1 _N  
TF-IDF (term frequency-inverse document frequency) sch√©ma 
Tento p≈ô√≠stup je zalo≈æen na my≈°lence, ≈æe ƒç√≠m v√≠cekr√°t  se  slovo  (term)  v dokumentu  vyskytuje, t√≠m je 
d≈Øle≈æitƒõj≈°√≠ (TF faktor), a ƒç√≠m m√©nƒõ ƒçastƒõji se slovo vyskytuje ve v≈°ech dokumentech, t√≠m v√≠ce je specifick√© a 
tud√≠≈æ d≈Øle≈æit√© (IDF faktor). Inverzn√≠ frekvence v√Ωskytu termu v dokumentech (inverse document frequency) 
se vypoƒç√≠t√° jako 
IDF(ti) = log ( N/n(ti) ), 
kde  ti  je  i-t√Ω term, N je poƒçet v≈°ech dokument≈Ø a n(ti) je poƒçet  dokument≈Ø obsahuj√≠c√≠ch term ti,  (n(ti)  se 
naz√Ωv√° frekvence v√Ωskytu termu v dokumentech, document frequency).  
Normalizace 
Aby se zabr√°nilo nadhodnocen√≠ term≈Ø v dlouh√Ωch dokumentech (ve kter√Ωch se vyskytuje vƒõt≈°√≠ mno≈æstv√≠ 
term≈Ø), mohou b√Ωt vektory normalizov√°ny. Jedn√≠m ze zp≈Øsob≈Ø normalizace je vydƒõlit v≈°echny v√°hy jejich 
souƒçtem: 
ùë§ùëõùëñùëó = ùë§ùëñùëó
‚àë ùë§ùëñùëóùëõùëñ=1
    
Program pro realizaci algoritmu pro ≈°√≠≈ôen√≠ aktivace v grafu 
≈†√≠≈ôen√≠ aktivace, je grafovou metoda (metoda operuj√≠c√≠ nad grafy) maj√≠c√≠ sv≈Øj p≈Øvod v kognitivn√≠ch vƒõd√°ch, 
kde je vyu≈æ√≠v√°na k porozumƒõn√≠ fungov√°n√≠ pamƒõti a procesu formov√°n√≠ a uƒçen√≠ se biologick√Ωch s√≠t√≠.  
V  souƒçasnosti  existuje  cel√°  ≈ôada  metod  spadaj√≠c√≠ch  do  t√©to  rodiny  aplikac√≠,  existuje  velk√©  mno≈æstv√≠ 
modifikac√≠  a  t√≠m  i  velk√©  mno≈æstv√≠  uplatnƒõn√≠.  Metody  ≈°√≠≈ôen√≠  aktivace  jsou  tak  ƒçasto  nasazov√°ny  p≈ôi 
numerick√Ωch simulac√≠ch fyzik√°ln√≠ch jev≈Ø, v robotice, v epidemick√Ωch modelech, p≈ôi vyhled√°v√°n√≠  informac√≠ 
(information retrieval) ƒçi v syst√©mech pro doporuƒçov√°n√≠. 
S√≠≈• je pot≈ôeba popsat pomoc√≠ nƒõjak√©ho form√°ln√≠ho prost≈ôedku. V√Ωhodn√Ωm, matematicky podlo≈æen√Ωm 
p≈ô√≠stupem je teorie graf≈Ø. Cel√Ω syst√©m (s√≠≈•) je pak reprezentov√°n orientovan√Ωm grafem. Ka≈æd√Ω orientovan√Ω 
graf je charakterizov√°n n√°sleduj√≠c√≠mi z√°kladn√≠mi funkcemi: 
ÔÇ∑ init(A, V) ‚Äì funkce p≈ôi≈ôazuje ka≈æd√© orientovan√© hranƒõ poƒç√°teƒçn√≠ uzel,  
ÔÇ∑ term(A, V) ‚Äì funkce p≈ôi≈ôazuje ka≈æd√© orientovan√© hranƒõ koncov√Ω uzel,  
ÔÇ∑ F(V) ‚Äì funkce p≈ôi≈ôazuje ka≈æd√©mu uzlu grafu aktivaƒçn√≠ hodnotu a > 0. 
V≈°echny objekty v s√≠t√≠ (nap≈ô. lid√©) jsou reprezentov√°ny uzly. Uzel je charakterizov√°n sv√Ωm oznaƒçen√≠m 
(identifik√°torem), kter√Ω jednoznaƒçnƒõ umo≈æ≈àuje identifikovat ka≈æd√Ω z uzl≈Ø. Tento identifik√°tor je pou≈æit tak√© 
pro definici poƒç√°teƒçn√≠ch a koncov√Ωch uzl≈Ø pro vazby a m≈Ø≈æe b√Ωt u≈æiteƒçn√Ω tak√© nap≈ô√≠klad p≈ôi vizualizaci 
grafov√© struktury. Typ uzlu umo≈æ≈àuje rozli≈°ovat mezi r≈Øzn√Ωmi druhy uzl≈Ø a klasifikovat je do t≈ô√≠d. Nap≈ô√≠klad 
v syst√©mech pro doporuƒçov√°n√≠ zalo≈æen√Ωch na vyu≈æ√≠v√°n√≠ tag≈Ø lze rozli≈°it ƒçty≈ôi druhy objekt≈Ø ‚Äì aktory, zdroje, 
tagy a instance tagov√°n√≠ (p≈ôi≈ôazen√≠ tagu ke konkr√©tn√≠mu zdroji urƒçit√Ωm aktorem). 
Vazba reprezentuje orientovan√© spojen√≠ mezi dvƒõma uzly. V√°ha vazby kvantifikuje tento vztah a je typicky 
pou≈æita jako z√°klad pro v√Ωpoƒçet √∫tlumu sign√°lu reprezentuj√≠c√≠ho ≈°√≠≈ô√≠c√≠ se aktivaƒçn√≠ hodnotu v r√°mci aplikace 
algoritm≈Ø ≈°√≠≈ôen√≠ aktivace. Hodnota men≈°√≠ ne≈æ 1 p≈ôedstavuje zeslaben√≠ sign√°lu, hodnota vƒõt≈°√≠ ne≈æ 1 sign√°l 
zesiluje.  
Dal≈°√≠ vlastnost vazeb, tzv. reciprocita, definuje, zda vazba mezi dvƒõma uzly je reciproƒçn√≠ (vz√°jemn√°). 
Znamen√° to, ≈æe pokud mezi uzly N1  a  N2  existuje  vazba  typu  Ta  a tato vazba je reciproƒçn√≠, automaticky 
existuje tak√© vazba typu Tar  mezi  uzly  N2  a  N1. Pokud je nap≈ô√≠klad mezi osobou  O1  a  O2  vztah takov√Ω, ≈æe 
osoba O1 je rodiƒçem osoby O2, pak automaticky existuje vazba mezi uzly O2 a O1 p≈ôedstavuj√≠c√≠ skuteƒçnost, ≈æe 
osoba O2 je potomkem osoby O1. Vazba O1 ÔÉ† O2 m≈Ø≈æe b√Ωt z√°rove≈à jin√©ho typu ne≈æ vazba O1 ÔÉü O2, proto≈æe v urƒçit√Ωch situac√≠ch m≈Ø≈æe b√Ωt t≈ôeba rozli≈°it mezi charakterem vztahu rodiƒç ÔÉ† potomek a potomek ÔÉü rodiƒç. 
Tento  zp≈Øsob  ch√°p√°n√≠  reciproƒçn√≠ch vazeb  p≈ôin√°≈°√≠  v√Ωhodu  zejm√©na  v procesu  vytv√°≈ôen√≠  struktury reprezentuj√≠c√≠ soci√°ln√≠ s√≠≈•, proto≈æe nen√≠ nutn√© explicitnƒõ definovat vazby automaticky vedouc√≠ opaƒçn√Ωm smƒõrem ƒçasto pro podstatnou ƒç√°st s√≠tƒõ. 
Struktura  grafu  a  parametry  algoritmu  jsou  zad√°ny  v  konfiguraƒçn√≠ch  souborech.  V  nich  jsou  ≈ô√°dky 
n√°sleduj√≠c√≠ho typu, ka≈æd√Ω ≈ô√°dek zaƒç√≠n√° urƒçit√Ωm kl√≠ƒçov√Ωm slovem (keyword), na z√°kladƒõ kter√©ho se rozhodne, 
co na ≈ô√°dku je. ≈ò√°dky zaƒç√≠naj√≠c√≠ znakem # jsou koment√°≈ôe a jsou ignorov√°ny: # typy uzl≈Ø (nt = node type) # keyword jm√©no typu nt  Osoba  # hrany (lt = link type) # keyword jm√©no typu lt  P≈ô√≠tel  # keyword,jm√©no typu,reciproƒçn√≠ vazba  ltr P≈ô√≠tel P≈ô√≠tel # automaticky p≈ôid√°v√° k hranƒõ typu P≈ô√≠tel hranu s opaƒçnou orientac√≠, typu P≈ô√≠tel  
'# v√°ha vazby (lw = link weight), vztahuje se k typu vazeb # keyword typ vazby v√°ha lw  P≈ô√≠tel  0.8
'# konkr√©tn√≠ uzly # keyword jm√©no uzlu typ uzlu n  A1  Osoba n  A2  Osoba ...  
'# konkr√©tn√≠ hrany # keyword poƒç√°tek konec typ vazby l  A1  A2 P≈ô√≠tel l  A1  A5 P≈ô√≠tel ...  
'# poƒç√°teƒçn√≠ hodnoty aktivace uzl≈Ø (ia = initial activation) # keyword uzel aktivace ia  A1 1 ... ...  
Algoritmy ≈°√≠≈ôen√≠ aktivace iterativnƒõ p≈ôed√°vaj√≠ aktivaci (tzn. hodnotu p≈ôi≈ôazenou ka≈æd√©mu uzlu) z uzl≈Ø, 
kter√Ωm  byla  na  poƒç√°tku  p≈ôi≈ôazena  urƒçit√°  v√Ωchoz√≠  hodnota  aktivace,  smƒõrem  k  dal≈°√≠m  uzl≈Øm  v  s√≠ti 
prost≈ôednictv√≠m sv√Ωch v√Ωstupn√≠ch vazeb. Tento proces obvykle pokraƒçuje do doby, ne≈æ je dosa≈æeno urƒçit√©ho 
rovnov√°≈æn√©ho stavu, tzn. cel√Ω syst√©m se stabilizuje na √∫rovni limitn√≠ distribuce aktivace, nebo jakmile je 
splnƒõna urƒçit√° podm√≠nka ukonƒçuj√≠c√≠ cel√Ω proces, nap≈ô√≠klad poƒçet iterac√≠. 
Z√°kladn√≠ algoritmus ≈°√≠≈ôen√≠ aktivace m√° n√°sleduj√≠c√≠ kroky: 
ÔÇ∑ Inicializace  (vstup)  ‚Äì  vytvo≈ôen√≠ grafu na z√°kladƒõ parametr≈Ø (pomoc√≠ vhodn√© struktury v pamƒõti), 
nastaven√≠ parametr≈Ø algoritmu, vlastnost√≠ s√≠tƒõ a poƒç√°teƒçn√≠ aktivace vybran√Ωch uzl≈Ø (p≈ôi≈ôazen√≠ 
ƒç√≠seln√Ωch hodnot uzl≈Øm) a vytvo≈ôen√≠ seznamu uzl≈Ø s poƒç√°teƒçn√≠ aktivac√≠.  
ÔÇ∑ Iterace a) posl√°n√≠  sign√°lu  z  aktivn√≠ch  uzl≈Ø  (hodnota  tƒõchto  uzl≈Ø  >  0)  uzl≈Øm,  kter√©  jsou  p≈ô√≠mo 
dosa≈æiteln√© p≈ôes hranu z tƒõchto aktivovan√Ωch uzl≈Ø  
ÔÇß hodnota odes√≠lan√° do ka≈æd√© hrany se vypoƒç√≠t√° podle vzorce  Xi * 1 / outdegree(Xi)^Beta,  
kde Xi je hodnota aktivace uzlu i, outdegree(i) je poƒçet v√Ωstupn√≠ch hran z uzlu i a 
Beta je parametr zadan√Ω v konfiguraƒçn√≠m souboru (^ je operace umocnƒõn√≠) 
ÔÇß p≈ôi pr≈Øchodu hranou m≈Ø≈æe sign√°l ztratit ƒç√°st sv√© hodnoty, tzn. hodnota na vstupu 
hrany je vyn√°sobena vahou hrany (podle jej√≠ho typu) 
ÔÇß nov√° hodnota uzlu je vypoƒç√≠t√°na podle vzorce  a*X(i) + b*Input(i) + c*Output(i),  
kde X(i) je p≈Øvodn√≠ hodnota aktivace uzlu i, Output(i) je suma  sign√°lu poslan√©ho z 
uzlu  i  do  v≈°ech  jeho  v√Ωstupn√≠ch  hran  a  Input(i)  je  souƒçet  hodnot  sign√°lu 
p≈ôich√°zej√≠c√≠ch ze v≈°ech vstupn√≠ch hran do uzlu i. A, b, c jsou parametry 
ÔÇß v√Ω≈°e uveden√© operace se dƒõj√≠ z√°rove≈à pro celou s√≠≈•, tzn. nejprve ze v≈°ech uzl≈Ø 
odejde urƒçit√° √∫rove≈à aktivace = na poƒç√°tku vazeb se objev√≠ nƒõjak√° hodnota, pak je 
tato hodnota utlumena d√≠ky v√°ze vazby a pak do v≈°ech uzl≈Ø p≈ôiteƒçe nƒõjak√° hodnota 
z jeho vstupn√≠ch vazeb b) kalibrace c) redukce seznamu aktivovan√Ωch uzl≈Ø ‚Äì  odstranƒõn√≠ uzl≈Ø, jejich≈æ hodnota aktivace je men≈°√≠, 
ne≈æ prahov√° hodnota t, kter√° je zadan√° jako parametr d) v√Ωstup ‚Äì seznam v≈°ech uzl≈Ø v s√≠ti a hodnot jejich aktivace e) rozhodnut√≠ o ukonƒçen√≠ iterace     
Kalibrace (normalizace) 
Normalizace je procesem, p≈ôi kter√©m doch√°z√≠ k line√°rn√≠ transformaci hodnot aktivace uzl≈Ø tak, aby do≈°lo ke 
splnƒõn√≠ podm√≠nek normalizace. Normalizac√≠ je umo≈ænƒõno nap≈ô√≠klad srovnat proces ≈°√≠≈ôen√≠ aktivace v r√°mci 
r≈Øzn√Ωch s√≠t√≠ a vyrovnat stav vznikl√Ω odebr√°n√≠m nƒõkter√Ωch uzl≈Ø z procesu ≈°√≠≈ôen√≠ aktivace. 
Mo≈ænosti kalibrace: 
ÔÇ∑ ≈Ω√°dn√° kalibrace. 
ÔÇ∑ Zachov√°n√≠ sumy hodnot uzl≈Ø, kter√© byly aktivov√°ny na poƒç√°tku (suma aktivace uzl≈Ø, kter√© byly na 
poƒç√°tku  aktivov√°ny,  mus√≠  z≈Østat  konstantn√≠,  rovna  sumƒõ  poƒç√°teƒçn√≠  aktivace;  pomƒõry  hodnot 
aktivace v≈°ech uzl≈Ø v s√≠t√≠ p≈ôed a po kalibraci mus√≠ z≈Østat stejn√©). Pokud m√° s√≠≈• nap≈ô. 5 uzl≈Ø a po 
jedn√© iteraci ≈°√≠≈ôen√≠ aktivace  maj√≠ hodnoty A = 5, B = 4, C = 2, D = 0, E = 2 a na poƒç√°tku cel√©ho 
procesu  byly  aktivov√°ny  uzly  B  a  C  a  obƒõma  byla  p≈ôi≈ôazena  hodnota  1,  mus√≠  po  kalibraci 
(normalizaci) b√Ωt suma aktivac√≠ uzl≈Ø B a C z≈Østat 2 (1 + 1). Uzel B tedy bude m√≠t hodnoty 1,33333 a 
uzel C hodnotu 0,666667. Pomƒõr tƒõchto hodnot je 4 : 2 a souƒçet je 2. Uprav√≠ se i hodnoty aktivace 
uzl≈Ø A a E (D je 0) tak, aby pomƒõr mezi hodnotami aktivace z≈Østal zachov√°n. 
ÔÇ∑ Zachov√°n√≠ celkov√© sumy hodnot aktivac√≠ uzl≈Ø (suma aktivace uzl≈Ø v cel√© s√≠ti mus√≠ z≈Østat konstantn√≠, 
rovna sumƒõ poƒç√°teƒçn√≠ aktivace; pomƒõry hodnot aktivace jednotliv√Ωch uzl≈Ø p≈ôed a po kalibraci mus√≠ 
z≈Østat stejn√©). Pokud m√° s√≠≈• nap≈ô. 5 uzl≈Ø a po jedn√© iteraci ≈°√≠≈ôen√≠ aktivace  maj√≠ hodnoty A = 5, B = 4, 
C = 2, D = 0, E = 2 a na poƒç√°tku cel√©ho procesu byly aktivov√°ny uzly B a C a obƒõma byla p≈ôi≈ôazena 
hodnota 1, mus√≠ po kalibraci (normalizaci) b√Ωt suma aktivac√≠ v≈°ech uzl≈Ø 2 (1 + 1). Uprav√≠ se hodnoty 
aktivace uzl≈Ø A, B, C a E (D je 0) tak, aby pomƒõr mezi hodnotami aktivace z≈Østal zachov√°n. Iterace se ukonƒç√≠ po urƒçit√©m poƒçtu opakov√°n√≠, kter√© je zad√°no jako parametr. 
Vzorov√Ω konfiguraƒçn√≠ soubor je zad√°n jako p≈ô√≠loha zad√°n√≠, je obsa≈æen i vzor v√Ωstup≈Ø pro v≈°echny t≈ôi v√Ω≈°e 
uveden√© mo≈ænosti kalibrace. 